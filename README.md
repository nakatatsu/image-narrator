# image-narrator

複数の画像をナレーション付きで次々に表示する静的サイトと、そのための素材を生成・整形するためのサンプルコードです。デザインはアドベンチャーゲーム風。

![Sample](sample.avif)

サンプルを動かすだけならWEBサーバーだけで足りますが、素材の生成のためにはPythonなどが必要です。

## Usage

1. `src/[ディレクトリ名]`でディレクトリを作る。
2. 作ったディレクトリに`[0字埋め四桁の数字].txt`のファイル名でテキストファイル、同じく`[0字埋め四桁の数字].jpeg`のファイル名で画像ファイルを好きなだけ配置する。テキストは同じIDの画像を説明する。たとえば0001.txtは0001jpegに対応する。終わったら`meta.json`にタイトルと表示画像数を保存する。
3. `convert.sh`でコンバートする。コマンドは`convert.sh [ディレクトリ名]`。avifencとImageMagickを使っているため、インストールしていないならする。Linux（作者の環境ではUbuntu with WSL2）上で動作を確認している。コンバート先はルートディレクトリ直下の同名のディレクトリとなる。
4. WEBサーバーにアップロードするか、ローカルでlocal_debug_server.pyを起動して（`python local_debug_server.py`）動作を確認する。

その他の細かいことはソースコードをご確認ください。

## Tips

- main.jsの中でシンプルにクエリ・ストリングで渡されたディレクトリ名を利用します。コードを流用する際はValidationを維持してください。検証が甘いとディレクトリトラバーサル攻撃を許す恐れがあります。
- APIキーはハードコーディングせず、環境変数に入れてください。
